<template>
    <div>
        
            <h1 class="text-center font-medium my-10 text-xl">Cadeaux les plus vendus</h1>

            <div id="controls-carousel" class="relative" data-carousel="static">

                <div class="overflow-hidden relative h-80 rounded-lg">

                    <div v-for="item in 2" :key="item" class="duration-700 ease-in-out absolute inset-0 transition-all transform -translate-x-full z-10" data-carousel-item="">
                      <div class="grid grid-cols-4 gap-2 h-full px-5 py-3">
                           
                           <template v-if="item==1">
                               <div v-for="product in firstFour" :key="product.id" class="max-w-sm bg-white rounded-lg shadow-md">

                                    <div class="relative">
                                        <a :href='setRouteCart(product.id)'>
                                            <img class="rounded-t-lg mx-auto w-22 h-48" 
                                            :src="require('../../assets/images/products/'+product.images[0].src)"
                                            alt="product image"
                                            >
                                        </a>  
                                            <a href="#"> 
                                                    <span class="absolute top-0 right-0 h-11 w-11 rounded-bl-full bg-white pl-1">
                                                    <svg class="h-6 w-6 mx-auto mt-1" xmlns="http://www.w3.org/2000/svg" fill="#DA2F47" viewBox="0 0 512 512"><path d="M0 190.9V185.1C0 115.2 50.52 55.58 119.4 44.1C164.1 36.51 211.4 51.37 244 84.02L256 96L267.1 84.02C300.6 51.37 347 36.51 392.6 44.1C461.5 55.58 512 115.2 512 185.1V190.9C512 232.4 494.8 272.1 464.4 300.4L283.7 469.1C276.2 476.1 266.3 480 256 480C245.7 480 235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1 .0003 232.4 .0003 190.9L0 190.9z"/></svg>
                                        </span>
                                        </a>
                                    </div>
                                
                                    <div class="px-1.5 pt-4">
                                        <a :href="setRouteCart(product.id)" class="">
                                            <h5 class="text-sm font-medium mb-2 tracking-tight text-gray-900 dark:text-white"> {{product.name}}  </h5>
                                            </a>
                                    
                                            <div class="flex items-center">
                                                <div class="flex items-center mb-1">
                                                    <span class="text-xl text-gray-900 dark:text-white font-bold"> {{product.price}} </span>
                                                    <span class="text-sm text-gray-900 dark:text-white mt-1 px-1">MAD</span>
                                                </div>
                                                <div v-if="product.old_price!=0" class="flex items-center mb-1 ml-3 line-through">
                                                    <span class="text-xmdl text-gray-400 dark:text-white font-bold"> {{product.old_price}} </span>
                                                    <span class="text-xs text-gray-400 dark:text-white mt-1 px-1">MAD</span>
                                                </div>
                                            </div>

                                            <div class="flex item-center">
                                                <svg class="h-3 w-3 my-auto mr-1" xmlns="http://www.w3.org/2000/svg" fill='#DA2F47' viewBox="0 0 496 512"><path d="M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm114.6 226.4l-113 152.7-112.7-152.7c-8.7-11.9-19.1-50.4 13.6-72 28.1-18.1 54.6-4.2 68.5 11.9 15.9 17.9 46.6 16.9 61.7 0 13.9-16.1 40.4-30 68.1-11.9 32.9 21.6 22.6 60 13.8 72z"/></svg>
                                                <span class="text-xs">({{product.num_love}}) favourises</span>
                                            </div>
                                    </div>

                                </div>
                            </template>


                           <template v-else-if="item==2">
                               <div v-for="product in scondFour" :key="product" class="max-w-sm bg-white rounded-lg shadow-md">
                                
                                    <div class="relative">
                                        <a :href="setRouteCart(product.id)" class="">
                                            <img class="rounded-t-lg mx-auto w-22 h-48" 
                                            :src="require('../../assets/images/products/'+product.images[0].src)"
                                            alt="product image"
                                            >
                                        </a> 
                                        <a :href="setRouteCart(product.id)"> 
                                            <span class="absolute top-0 right-0 h-11 w-11 rounded-bl-full bg-white pl-1">
                                                <svg class="h-6 w-6 mx-auto mt-1" xmlns="http://www.w3.org/2000/svg" fill="#DA2F47" viewBox="0 0 512 512"><path d="M0 190.9V185.1C0 115.2 50.52 55.58 119.4 44.1C164.1 36.51 211.4 51.37 244 84.02L256 96L267.1 84.02C300.6 51.37 347 36.51 392.6 44.1C461.5 55.58 512 115.2 512 185.1V190.9C512 232.4 494.8 272.1 464.4 300.4L283.7 469.1C276.2 476.1 266.3 480 256 480C245.7 480 235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1 .0003 232.4 .0003 190.9L0 190.9z"/></svg>
                                            </span>
                                        </a>
                                    </div>
                                
                                    <div class="px-1.5 pt-4">
                                        <a :href="setRouteCart(product.id)" class="">
                                            <h5 class="text-sm font-medium mb-2 tracking-tight text-gray-900 dark:text-white"> {{product.name}}  </h5>
                                            </a>
                                    
                                            <div class="flex items-center">
                                                <div class="flex items-center mb-1">
                                                    <span class="text-xl text-gray-900 dark:text-white font-bold"> {{product.price}} </span>
                                                    <span class="text-sm text-gray-900 dark:text-white mt-1 px-1">MAD</span>
                                                </div>
                                                <div v-if="product.old_price!=0" class="flex items-center mb-1 ml-3 line-through">
                                                    <span class="text-xmdl text-gray-400 dark:text-white font-bold"> {{product.old_price}} </span>
                                                    <span class="text-xs text-gray-400 dark:text-white mt-1 px-1">MAD</span>
                                                </div>
                                            </div>

                                            <div class="flex item-center">
                                                <svg class="h-3 w-3 my-auto mr-1" xmlns="http://www.w3.org/2000/svg" fill='#DA2F47' viewBox="0 0 496 512"><path d="M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm114.6 226.4l-113 152.7-112.7-152.7c-8.7-11.9-19.1-50.4 13.6-72 28.1-18.1 54.6-4.2 68.5 11.9 15.9 17.9 46.6 16.9 61.7 0 13.9-16.1 40.4-30 68.1-11.9 32.9 21.6 22.6 60 13.8 72z"/></svg>
                                                <span class="text-xs">({{product.num_love}}) favourises</span>
                                            </div>
                                    </div>

                                </div>
                            </template>





                          
                      </div>
                    </div>

                
                </div>

                <button type="button" class="flex absolute top-0 left-0 z-30 justify-center items-center px-3 h-full cursor-pointer group focus:outline-none" data-carousel-prev="">
                <span class="inline-flex bg-red-500 justify-center items-center w-10 h-10 rounded-full bg-white/30 dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
                <svg class="w-6 h-6 text-white dark:text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                <span class="hidden">Previous</span>
                </span>
                </button>
                <button type="button" class="flex absolute top-0 right-0 z-30 justify-center items-center px-4 h-full cursor-pointer group focus:outline-none" data-carousel-next="">
                <span class="inline-flex bg-red-500 justify-center items-center w-10 h-10 rounded-full bg-white/30 dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
                <svg class="w-6 h-6 text-white dark:text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                <span class="hidden">Next</span>
                </span>
                </button>
            </div>

    </div>
</template>

<script>
import axios from 'axios'
export default {
  data(){
    return{
      productsPlus : [],
      firstFour : [],
      scondFour : [],
    }
  },
  created(){
      this.getProductsPlus()
  },
   methods:{
        async getProductsPlus(){

            axios.get('http://localhost/hadiyati/rich-products').then((response) => {
                    this.productsPlus = response.data

                    this.firstFour.push(response.data[0])
                    this.firstFour.push(response.data[1])
                    this.firstFour.push(response.data[2])
                    this.firstFour.push(response.data[3])

                    this.scondFour.push(response.data[4])
                    this.scondFour.push(response.data[5])
                    this.scondFour.push(response.data[6])
                    this.scondFour.push(response.data[7])
                   
                }).catch((error) => {
                    console.log(error);
                })

        },
        setRouteCart(id){
           return '/cart/'+id
        }
   }
}
</script>

<style>



</style>